(function(e){function t(t){for(var a,o,i=t[0],l=t[1],c=t[2],d=0,f=[];d<i.length;d++)o=i[d],r[o]&&f.push(r[o][0]),r[o]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);u&&u(t);while(f.length)f.shift()();return s.push.apply(s,c||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],a=!0,i=1;i<n.length;i++){var l=n[i];0!==r[l]&&(a=!1)}a&&(s.splice(t--,1),e=o(o.s=n[0]))}return e}var a={},r={app:0},s=[];function o(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=a,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(n,a,function(t){return e[t]}.bind(null,a));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=t,i=i.slice();for(var c=0;c<i.length;c++)t(i[c]);var u=l;s.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";var a=n("64a9"),r=n.n(a);r.a},2969:function(e,t,n){"use strict";var a=n("8da7"),r=n.n(a);r.a},"411c":function(e,t,n){"use strict";var a=n("aebb"),r=n.n(a);r.a},"4fda":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("097d");var a=n("2b0e"),r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},s=[],o={name:"app",components:{}},i=o,l=(n("034f"),n("2877")),c=Object(l["a"])(i,r,s,!1,null,null,null);c.options.__file="App.vue";var u=c.exports,d=n("8c4f"),f=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"background-app"}),n("div",{staticClass:"login-container"},[n("div",{staticClass:"login-app"},[e._m(0),n("div",{staticClass:"login-input-app"},[n("h2",[e._v("Se connecter")]),n("el-form",{attrs:{"label-position":"top","label-width":"100px",model:e.labels}},[n("el-form-item",{attrs:{label:"Email"}},[n("el-input",{attrs:{type:"email"},model:{value:e.labels.email,callback:function(t){e.$set(e.labels,"email",t)},expression:"labels.email"}})],1),n("el-form-item",{attrs:{label:"Mot de passe"}},[n("el-input",{attrs:{type:"password"},model:{value:e.labels.password,callback:function(t){e.$set(e.labels,"password",t)},expression:"labels.password"}})],1)],1),n("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{disabled:e.loading,type:"primary"},on:{click:function(t){t.preventDefault(),e.submit_handler()}}},[e._v("\n          Let's go\n        ")])],1)])])])},p=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"brand"},[n("h1",[e._v("RentCars")])])}],v=n("bc3a"),m=n.n(v),h=n("2f62"),b=(n("f751"),n("d4ec")),g=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(b["a"])(this,e),Object.assign(this,{email:"",lastName:"",firstName:"",age:"",service:"",id:-1},t)};a["default"].use(h["a"]);var _=new h["a"].Store({state:{user:null},mutations:{login:function(e,t){e.user=new g(t)},logoff:function(e){e.user=null}},getters:{fullName:function(e){return"".concat(e.user.firstName," ").concat(e.user.lastName)}},actions:{}}),w={store:_,router:B,name:"Login",data:function(){return{labels:{email:"",password:""},loading:!1}},methods:{submit_handler:function(){this.loading=!0,this.setUser()},setUser:function(){var e=this;m.a.get("http://localhost:8080/RentalCarsUPEM/api/user?email=".concat(this.labels.email,"&password=").concat(this.labels.password)).then(function(t){console.log(t),e.loading=!1,_.commit("login",t.data),console.log(t.data),e.$router.push("home")}).catch(function(t){console.log(t),e.loading=!1,e.$notify.error({title:"Erreur",message:"Une erreur est survenue"})})}}},C=w,y=(n("411c"),Object(l["a"])(C,f,p,!1,null,"7ad5249f",null));y.options.__file="Login.vue";var x=y.exports,O=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("Header"),n("router-link",{attrs:{to:"/home/rent"}},[n("a",[e._v("Location")])]),n("router-view")],1)},R=[],P=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"section"},[n("div",{staticClass:"container w-container"},[n("img",{staticClass:"image",attrs:{src:"https://uploads-ssl.webflow.com/5bf5afa9ba0bd51e495041ce/5bf97e3afad79debabd5da26_UPEM_LOGO.png",width:"120.5",alt:""}}),n("h4",[e._v("RaRoGui RMI")]),n("div",{staticClass:"user-info"},[n("img",{attrs:{src:"https://uploads-ssl.webflow.com/5bf5afa9ba0bd51e495041ce/5bf9828dc176118534ade2d5_5ad89256ffaa090558e0e9f2_head.svg",width:"42",alt:""}}),n("div",[n("div",[e._v(e._s(e.fullName))]),n("a",{staticClass:"logoff",on:{click:function(t){e.logoff_handler()}}},[e._v("Se déconnecter")])])])])])},E=[],$={store:_,router:B,name:"Header",data:function(){return{}},computed:{fullName:function(){return this.$store.getters.fullName}},methods:{logoff_handler:function(){this.$store.commit("logoff"),this.$router.push("login")}}},j=$,k=(n("aa31"),Object(l["a"])(j,P,E,!1,null,"6d165ec6",null));k.options.__file="Header.vue";var q=k.exports,N={name:"home",components:{Header:q}},M=N,I=Object(l["a"])(M,O,R,!1,null,null,null);I.options.__file="Home.vue";var L=I.exports,D=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"w-container"},e._l(e.cars,function(t,a){return n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],key:a,staticClass:"section-2"},[e._m(0,!0),n("div",{staticClass:"car-info"},[n("h3",{staticClass:"heading"},[e._v(e._s(t.brand)+" "+e._s(t.model))]),n("p",[e._v(e._s(t.nbDoors)+" portes")]),n("el-rate",{attrs:{value:Math.round(100*t.rate.toFixed(1))/100,disabled:"","show-score":"","text-color":"#ff9900","score-template":"{value} / 5"},on:{input:function(e){t.rate=e.target.value}}}),n("div",{staticClass:"car-availability"},[t.rented?0===t.nbRequester?n("el-tag",{attrs:{type:"success"}},[e._v("\n          Soyez le premier à réserver ce modèle\n        ")]):1===t.nbRequester?n("el-tag",{attrs:{type:"info"}},[e._v("\n          Déjà "+e._s(t.nbRequester)+" personne en attente sur ce modèle\n        ")]):n("el-tag",{attrs:{type:"info"}},[e._v("\n          Déjà "+e._s(t.nbRequester)+" personnes en attente sur ce modèle\n        ")]):n("el-tag",{attrs:{type:"success"}},[e._v("Disponible")])],1)],1),n("div",{staticClass:"price"},[e._m(1,!0),n("div",{staticClass:"price-value"},[n("div",{staticClass:"div-block-4"},[n("div",[n("strong",[e._v(e._s(t.priceRent)+"€/jour TTC")])]),n("div",{staticClass:"text-block-2"},[e._v("soit 640,42€")])]),t.rented?n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.requestPending,expression:"car.requestPending"}],staticClass:"div-block-3",on:{click:function(n){e.rentHandler(t)}}},[e._v("\n          Réserver ce modèle\n        ")]):n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.requestPending,expression:"car.requestPending"}],staticClass:"div-block-3",on:{click:function(n){e.rentHandler(t)}}},[e._v("\n          Louer ce modèle\n        ")])])])])}))},U=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("img",{staticClass:"image-2",attrs:{src:"https://uploads-ssl.webflow.com/5bf5afa9ba0bd51e495041ce/5bf9871b4ae342456f82bae9_peugeot-208-5d-schwarz-2012.png",alt:""}})])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"price-name"},[n("h3",{staticClass:"heading-2"},[e._v("MEILLEUR PRIX - MODIFICATION & ANNULATION ")])])}],S=(n("20d6"),n("ac6a"),function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(b["a"])(this,e),Object.assign(this,{id:"",brand:"",model:"",state:0,nbDoors:0,rate:5,priceRent:0,nbRequester:0,rented:!1,requestPending:!1},t)}),T={name:"Rent",data:function(){return{cars:[],loading:!0}},methods:{getCars:function(){var e=this;m.a.get("http://localhost:8080/RentalCarsUPEM/api/cars").then(function(t){var n=[];t.data.forEach(function(e){n.push(new S(e))}),e.cars=n,e.loading=!1}).catch(function(t){console.log(t),e.loading=!1,e.$notify.error({title:"Erreur",message:"Une erreur est survenue"})})},setCarRequestPending:function(e,t){var n=this.cars.findIndex(function(t){return t.id===e.id});n<0||(this.cars[n].requestPending=t)},rentHandler:function(e){var t=this;this.setCarRequestPending(e,!0),m.a.post("http://localhost:8080/RentalCarsUPEM/api/rent-car",{carID:e.id,userID:this.$store.state.user.id}).then(function(n){var a=n.data.rentStatus,r=n.data.rentQueuePosition;t.setCarRequestPending(e,!1),"VALIDATED"===a?t.$alert("Votre véhicule immatriculée: ".concat(e.id," vous attend !"),"Location ".concat(e.brand," ").concat(e.model),{confirmButtonText:"Mes réservation",callback:function(){}}):t.$alert("Votre demande de location a bien été prise en compte ! Vous êtes à la ".concat(r,"ème position"),"Location ".concat(e.brand," ").concat(e.model),{confirmButtonText:"Mes réservation",callback:function(){}})}).catch(function(){t.setCarRequestPending(e,!1),t.$notify.error({title:"Erreur",message:"Une erreur est survenue"})})}},mounted:function(){setInterval(this.getCars(),2e3)}},A=T,H=(n("2969"),Object(l["a"])(A,D,U,!1,null,"3d0d33cf",null));H.options.__file="Rent.vue";var V=H.exports;a["default"].use(d["a"]);var z=new d["a"]({routes:[{path:"*",component:x},{path:"/",component:x},{path:"/login",name:"login",component:x},{path:"/home",name:"home",component:L,meta:{requiresAuth:!0},children:[{path:"rent",name:"rent",component:V}]}]});z.beforeEach(function(e,t,n){var a=null!=_.state.user,r=e.matched.some(function(e){return e.meta.requiresAuth});r&&!a?n("login"):!r&&a?n("home"):n()});var B=z,F=n("5c96"),G=n.n(F),J=(n("0fae"),n("8f86")),Q=n.n(J);a["default"].use(G.a,{locale:Q.a}),a["default"].config.productionTip=!1,new a["default"]({router:B,store:_,render:function(e){return e(u)}}).$mount("#app")},"64a9":function(e,t,n){},"8da7":function(e,t,n){},aa31:function(e,t,n){"use strict";var a=n("4fda"),r=n.n(a);r.a},aebb:function(e,t,n){}});
//# sourceMappingURL=app.29204340.js.map